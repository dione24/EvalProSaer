{% extends 'layouts/app.html.twig' %}

{% block body %}


	<div class="row">
		<div class="col-12">
			<div class="page-title-box d-sm-flex align-items-center justify-content-between">
				<h4 class="mb-sm-0 font-size-18">Project
				</h4>

				<div class="page-title-right">
					<ol class="breadcrumb m-0">
						<li class="breadcrumb-item">
							<a href="javascript: void(0);">Project</a>
						</li>
						<li class="breadcrumb-item active">Project Overview</li>
					</ol>
				</div>

			</div>
		</div>
	</div>
	<!-- end page title -->


	<div class="row">
		<div class="col-lg-8">
			<div class="card">
				<div class="card-body">
					<div class="d-flex">
						<div class="flex-shrink-0 me-4">
							<img src="{{asset('assets/images/companies/img-1.png')}}" alt="" class="avatar-sm">
						</div>

						<div class="flex-grow-1 overflow-hidden">
							<h5 class="text-truncate font-size-15">{{ projet.nom }}</h5>
							<p class="text-muted">
								{{ projet.client }}
							</p>
						</div>
					</div>

					<h5 class="font-size-15 mt-4">
						Details du Projet :</h5>

					<p class="text-muted">
						{{ projet.description }}
					</p>


					<div class="row task-dates">
						<div class="col-sm-4 col-6">
							<div class="mt-4">
								<h5 class="font-size-14">
									<i class="bx bx-calendar me-1 text-primary"></i>
									Date de Debut</h5>
								<p class="text-muted mb-0">{{ projet.dateDebut ? projet.dateDebut|date('Y-m-d') : '' }}</p>
							</div>
						</div>

						<div class="col-sm-4 col-6">
							<div class="mt-4">
								<h5 class="font-size-14">
									<i class="bx bx-calendar-check me-1 text-primary"></i>
									Date de Fin</h5>
								<p class="text-muted mb-0">
									{{ projet.dateFin ? projet.dateFin|date('Y-m-d') : '' }}
								</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- end col -->
		<div class="col-lg-4">
			<div class="card">
				<div class="card-body">
					<h4 class="card-title mb-4">Membres du Projet</h4>

					<div class="table-responsive">
						<table class="table align-middle table-nowrap">
							<tbody>
								{% for tache in projet.taches %}
									{% for consultant in tache.consultants %}
										<tr>
											<td style="width: 50px;">
												<img src="{{ asset('assets/images/users/avatar-2.jpg') }}" class="rounded-circle avatar-xs" alt="">
											</td>
											<td>
												<h5 class="font-size-14 m-0">
													<a href="javascript: void(0);" class="text-dark">
														{{ consultant.user.nom }}
														{{ consultant.user.prenom }}
													</a>
												</h5>
											</td>
										</tr>
									{% endfor %}
								{% endfor %}


							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>


		<!-- end col -->
	</div>
	<!-- end row -->

	<div class="row">
		<div class="col-lg-4">
			<div class="card">
				<div class="card-body">
					<h4 class="card-title mb-4">Overview</h4>

					<div id="overview-chart" class="apex-charts" dir="ltr"></div>
				</div>
			</div>
		</div>
		<!-- end col -->

		<div class="col-lg-4">
			<div class="card">
				<div class="card-body">
					<h4 class="card-title mb-4">
						Pi√®ces Jointes
					</h4>
					<div class="table-responsive">
						<table class="table table-nowrap align-middle table-hover mb-0">
							<tbody>
								<tr>
									<td style="width: 45px;">
										<div class="avatar-sm">
											<span class="avatar-title rounded-circle bg-primary bg-soft text-primary font-size-24">
												<i class="bx bxs-file-doc"></i>
											</span>
										</div>
									</td>
									<td>
										<h5 class="font-size-14 mb-1">
											<a href="javascript: void(0);" class="text-dark">Skote Landing.Zip</a>
										</h5>
										<small>Size : 3.25 MB</small>
									</td>
									<td>
										<div class="text-center">
											<a href="javascript: void(0);" class="text-dark">
												<i class="bx bx-download h3 m-0"></i>
											</a>
										</div>
									</td>
								</tr>

							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
		<!-- end col -->

		<div class="col-lg-4">
			<div class="card">
				<div class="card-body">
					<h4 class="card-title mb-4">
						Rapports
					</h4>

					{% for tache in projet.taches %}
						{% for rapport in tache.rapports %}
							<div class="d-flex mb-4">
								<div class="flex-shrink-0 me-3">
									<img class="d-flex-object rounded-circle avatar-xs" alt="" src="{{ asset('assets/images/users/avatar-2.jpg') }}">
								</div>
								<div class="flex-grow-1">
									<h5 class="font-size-13 mb-1">
										{% set trimestre = (rapport.periode|date('n') + 2) / 3 %}
										Trimestre
										{{ trimestre|round(0, 'floor') }}
									</h5>
									<p class="text-muted mb-1">
										{{ rapport.consultant.user.nom }}
										{{ rapport.consultant.user.prenom }}
									</p>
								</div>
								<div class="ms-3">
									<a href="{{ path('app_rapport_show', {'id': rapport.id}) }}" class="text-primary">
										<i class="bx bx-show"></i>
									</a>
								</div>
							</div>
						{% endfor %}
					{% endfor %}


				</div>
			</div>
		</div>
		<!-- end col -->
	</div>


	{# 
																																																																																																																																						<h1>Projet</h1>
																																																																																																																																					
																																																																																																																																						<table class="table">
																																																																																																																																							<tbody>
																																																																																																																																								<tr>
																																																																																																																																									<th>Id</th>
																																																																																																																																									<td>{{ projet.id }}</td>
																																																																																																																																								</tr>
																																																																																																																																								<tr>
																																																																																																																																									<th>Nom</th>
																																																																																																																																									<td>{{ projet.nom }}</td>
																																																																																																																																								</tr>
																																																																																																																																								<tr>
																																																																																																																																									<th>Client</th>
																																																																																																																																									<td>{{ projet.client }}</td>
																																																																																																																																								</tr>
																																																																																																																																								<tr>
																																																																																																																																									<th>Description</th>
																																																																																																																																									<td>{{ projet.description }}</td>
																																																																																																																																								</tr>
																																																																																																																																								<tr>
																																																																																																																																									<th>Budget</th>
																																																																																																																																									<td>{{ projet.budget }}</td>
																																																																																																																																								</tr>
																																																																																																																																								<tr>
																																																																																																																																									<th>Date_debut</th>
																																																																																																																																									<td>{{ projet.dateDebut ? projet.dateDebut|date('Y-m-d') : '' }}</td>
																																																																																																																																								</tr>
																																																																																																																																								<tr>
																																																																																																																																									<th>Date_fin</th>
																																																																																																																																									<td>{{ projet.dateFin ? projet.dateFin|date('Y-m-d') : '' }}</td>
																																																																																																																																								</tr>
																																																																																																																																								<tr>
																																																																																																																																									<th>Statut</th>
																																																																																																																																									<td>{{ projet.statut.nom }}</td>
																																																																																																																																								</tr>
																																																																																																																																							</tbody>
																																																																																																																																						</table>
																																																																																																																																						<div class="mt-3">
																																																																																																																																							<a href="{{ path('app_projet_index') }}" class="btn btn-secondary me-2">Back to list</a>
																																																																																																																																							<a href="{{ path('app_projet_edit', {'id': projet.id}) }}" class="btn btn-primary me-2">Edit</a>
																																																																																																																																							<form method="post" action="{{ path('app_projet_delete', {'id': projet.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');" style="display: inline;">
																																																																																																																																								<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ projet.id) }}">
																																																																																																																																								<button type="submit" class="btn btn-danger">Delete</button>
																																																																																																																																							</form>
																																																																																																																																						</div> #}


{% endblock %}
